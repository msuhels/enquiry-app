# name: Deploy to Ubuntu Server

# on:
#   push:
#     branches:
#       - prod

# jobs:
#   deploy:
#     name: Deploy to Production Server
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4

#       - name: Connect via SSH and deploy
#         uses: appleboy/ssh-action@v1.1.0
#         with:
#           host: ${{ secrets.SERVER_HOST }}
#           username: ${{ secrets.SERVER_USER }}
#           key: ${{ secrets.SERVER_SSH_KEY }}
#           port: 22
#           script: |
#             cd ~/enquiry-app

#             echo "ğŸ“¥ Pulling latest code..."
#             git fetch origin prod
#             git reset --hard origin/prod

#             echo "ğŸ“¦ Installing dependencies..."
#             npm install --legacy-peer-deps

#             echo "âš™ï¸ Building Next.js..."
#             npm run build

#             echo "ğŸš€ Restarting PM2 process..."
#             pm2 restart enquiry || pm2 start "npm run start" --name enquiry
            
#             echo "ğŸ‰ Deployment complete!"
